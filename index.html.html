<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Futuristic Quiz Challenge</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --accent: #00cec9;
            --dark: #2d3436;
            --light: #f7f7f7;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #d63031;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(108, 92, 231, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 206, 201, 0.1) 0%, transparent 20%);
            z-index: -1;
        }

        .glowing-border {
            border: 1px solid rgba(108, 92, 231, 0.3);
            box-shadow: 0 0 15px rgba(108, 92, 231, 0.5);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
            min-height: 80vh;
            padding: 30px;
            border-radius: 20px;
            background: rgba(26, 26, 46, 0.7);
            backdrop-filter: blur(10px);
            margin: 20px 0;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            font-size: 3.5rem;
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(90deg, var(--accent), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(0, 206, 201, 0.3);
            font-weight: 800;
        }

        h2 {
            font-size: 2.2rem;
            margin-bottom: 25px;
            color: var(--accent);
            text-align: center;
        }

        .subtitle {
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 40px;
            color: var(--secondary);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 25px;
            margin-top: 40px;
        }

        .btn {
            padding: 18px 40px;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            z-index: -1;
            transition: transform 0.5s ease;
            transform: scaleX(0);
            transform-origin: left;
        }

        .btn:hover::before {
            transform: scaleX(1);
        }

        .btn-primary {
            background: linear-gradient(90deg, var(--primary), var(--accent));
            color: white;
            box-shadow: 0 0 20px rgba(108, 92, 231, 0.5);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid var(--accent);
        }

        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(108, 92, 231, 0.4);
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .card {
            background: rgba(45, 52, 54, 0.6);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(108, 92, 231, 0.3);
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--accent);
        }

        .card i {
            font-size: 3.5rem;
            color: var(--accent);
            margin-bottom: 20px;
        }

        .card h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .card p {
            color: #b2bec3;
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 25px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: var(--secondary);
        }

        input, select, textarea {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid rgba(108, 92, 231, 0.3);
            background: rgba(45, 52, 54, 0.5);
            color: white;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(0, 206, 201, 0.3);
        }

        .question-card {
            background: rgba(45, 52, 54, 0.7);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(108, 92, 231, 0.3);
        }

        .question-card h3 {
            color: var(--accent);
            margin-bottom: 15px;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 10px;
        }

        .option {
            padding: 12px;
            background: rgba(108, 92, 231, 0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }

        .option:hover {
            background: rgba(108, 92, 231, 0.3);
        }

        .option.selected {
            background: rgba(0, 206, 201, 0.3);
            border: 2px solid var(--accent);
        }

        .code-display {
            font-size: 3rem;
            text-align: center;
            margin: 40px 0;
            background: rgba(0, 0, 0, 0.3);
            padding: 30px;
            border-radius: 15px;
            letter-spacing: 5px;
            font-weight: 700;
            color: var(--accent);
            border: 2px solid var(--accent);
            box-shadow: 0 0 30px rgba(0, 206, 201, 0.3);
        }

        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .share-btn {
            padding: 12px 25px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .share-btn:hover {
            transform: translateY(-3px);
            background: rgba(108, 92, 231, 0.3);
        }

        .leaderboard {
            margin-top: 40px;
            background: rgba(45, 52, 54, 0.6);
            border-radius: 15px;
            padding: 25px;
            max-height: 400px;
            overflow-y: auto;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            border-bottom: 1px solid rgba(108, 92, 231, 0.2);
        }

        .leaderboard-item:last-child {
            border-bottom: none;
        }

        .leaderboard-header {
            font-weight: bold;
            color: var(--accent);
            font-size: 1.2rem;
            padding: 15px;
            border-bottom: 2px solid var(--accent);
        }

        .leaderboard-position {
            font-weight: 700;
            color: var(--secondary);
            min-width: 40px;
        }

        .leaderboard-name {
            flex-grow: 1;
        }

        .leaderboard-score {
            color: var(--accent);
            font-weight: 700;
            min-width: 60px;
            text-align: right;
        }

        .progress-bar {
            height: 8px;
            background: rgba(108, 92, 231, 0.2);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .result-container {
            text-align: center;
            padding: 40px;
            background: rgba(45, 52, 54, 0.6);
            border-radius: 20px;
            margin: 30px auto;
            max-width: 700px;
            border: 2px solid var(--accent);
            box-shadow: 0 0 30px rgba(0, 206, 201, 0.3);
        }

        .score-display {
            font-size: 5rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--accent), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 20px 0;
        }

        .stars {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .star {
            color: #b2bec3;
            font-size: 2.5rem;
        }

        .star.filled {
            color: #fdcb6e;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .floating {
            animation: floating 6s ease-in-out infinite;
        }

        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        .neon-text {
            text-shadow: 
                0 0 5px var(--accent),
                0 0 10px var(--accent),
                0 0 20px var(--accent),
                0 0 40px var(--secondary),
                0 0 80px var(--secondary);
        }

        .question-count {
            background: rgba(108, 92, 231, 0.2);
            padding: 10px 20px;
            border-radius: 50px;
            margin: 20px auto;
            display: inline-block;
        }

        .custom-question-form {
            background: rgba(45, 52, 54, 0.7);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .custom-question-form h4 {
            color: var(--accent);
            margin-bottom: 15px;
            text-align: center;
        }

        .error-message {
            color: var(--danger);
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            display: none;
        }

        .required::after {
            content: " *";
            color: var(--danger);
        }

        .device-note {
            text-align: center;
            margin-top: 30px;
            padding: 15px;
            background: rgba(0, 206, 201, 0.1);
            border-radius: 10px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .device-note i {
            color: var(--accent);
            margin-right: 10px;
        }

        .points-display {
            text-align: center;
            margin: 15px 0;
            font-size: 1.2rem;
        }

        .points-display span {
            font-weight: bold;
            color: var(--accent);
        }

        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 1.8rem; }
            .btn { padding: 15px 30px; font-size: 1.1rem; }
            .options { grid-template-columns: 1fr; }
            .code-display { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Page 1: Home -->
        <div id="home-page" class="page active">
            <h1 class="floating">QUIZ CONNECTION</h1>
            <p class="subtitle">Test how well your friends or partner really know you with personalized quizzes</p>
            
            <div class="device-note">
                <i class="fas fa-sync-alt"></i> Your quizzes are now shareable across devices! 
                Anyone with your code can take your quiz from any device.
            </div>
            
            <div class="btn-container">
                <button class="btn btn-primary pulse" onclick="navigateTo('create-page')">
                    <i class="fas fa-plus-circle"></i> CREATE QUIZ
                </button>
                <button class="btn btn-secondary" onclick="navigateTo('join-page')">
                    <i class="fas fa-play-circle"></i> JOIN QUIZ
                </button>
            </div>
            
            <div class="card-grid">
                <div class="card glowing-border floating" style="animation-delay: 0.2s">
                    <i class="fas fa-user-friends"></i>
                    <h3>Test Friends</h3>
                    <p>Create a fun quiz to see how well your friends know you. Perfect for social gatherings!</p>
                </div>
                
                <div class="card glowing-border floating" style="animation-delay: 0.4s">
                    <i class="fas fa-heart"></i>
                    <h3>Test Partner</h3>
                    <p>Challenge your significant other with personal questions to strengthen your bond.</p>
                </div>
                
                <div class="card glowing-border floating" style="animation-delay: 0.6s">
                    <i class="fas fa-trophy"></i>
                    <h3>Leaderboards</h3>
                    <p>Track scores and see who knows you best with our performance ranking system.</p>
                </div>
            </div>
        </div>
        
        <!-- Page 2: Create Quiz -->
        <div id="create-page" class="page">
            <h2>CREATE YOUR QUIZ</h2>
            <p class="subtitle">Choose a category for your quiz</p>
            
            <div class="btn-container">
                <button class="btn btn-primary" onclick="selectCategory('friend')">
                    <i class="fas fa-user-friends"></i> TEST YOUR FRIEND
                </button>
                <button class="btn btn-primary" onclick="selectCategory('partner')">
                    <i class="fas fa-heart"></i> TEST YOUR PARTNER
                </button>
            </div>
            
            <div class="form-group">
                <label for="creator-name" class="required">Your Name</label>
                <input type="text" id="creator-name" placeholder="Enter your name" required>
            </div>
            
            <div class="form-group">
                <label for="creator-email" class="required">Your Email</label>
                <input type="email" id="creator-email" placeholder="Enter your email" required>
            </div>
            
            <div class="error-message" id="create-error">Please fill in all required fields!</div>
            
            <button class="btn btn-secondary" style="margin: 0 auto; display: block;" onclick="navigateTo('home-page')">
                <i class="fas fa-arrow-left"></i> BACK TO HOME
            </button>
        </div>
        
        <!-- Page 3: Questions Selection -->
        <div id="questions-page" class="page">
            <h2>CUSTOMIZE YOUR QUIZ</h2>
            <p class="subtitle">Select the number of questions and customize them</p>
            
            <div class="form-group">
                <label for="question-count" class="required">Number of Questions (4-20)</label>
                <select id="question-count" onchange="updateQuestionCount()">
                    <option value="4">4 Questions</option>
                    <option value="6">6 Questions</option>
                    <option value="8">8 Questions</option>
                    <option value="10">10 Questions</option>
                    <option value="12">12 Questions</option>
                    <option value="15">15 Questions</option>
                    <option value="20" selected>20 Questions</option>
                </select>
            </div>
            
            <div id="questions-container">
                <!-- Questions will be dynamically added here -->
            </div>
            
            <div class="progress-bar">
                <div class="progress" id="selection-progress" style="width: 0%"></div>
            </div>
            <p style="text-align: center;">Selected: <span id="selected-count">0</span>/<span id="total-count">20</span> questions</p>
            
            <button id="create-quiz-btn" class="btn btn-primary" style="margin: 30px auto; display: block;">
                <i class="fas fa-check-circle"></i> CREATE QUIZ
            </button>
            
            <button class="btn btn-secondary" style="margin: 0 auto; display: block;" onclick="navigateTo('create-page')">
                <i class="fas fa-arrow-left"></i> BACK
            </button>
        </div>
        
        <!-- Page 4: Quiz Code -->
        <div id="code-page" class="page">
            <h2>YOUR QUIZ IS READY!</h2>
            <p class="subtitle">Share this code with anyone to let them take your quiz from any device</p>
            
            <div class="code-display neon-text" id="quiz-code">X7G9K2</div>
            
            <div class="share-buttons">
                <button class="share-btn" onclick="shareVia('facebook')">
                    <i class="fab fa-facebook"></i> Facebook
                </button>
                <button class="share-btn" onclick="shareVia('twitter')">
                    <i class="fab fa-twitter"></i> Twitter
                </button>
                <button class="share-btn" onclick="shareVia('whatsapp')">
                    <i class="fab fa-whatsapp"></i> WhatsApp
                </button>
                <button class="share-btn" onclick="copyCode()">
                    <i class="fas fa-copy"></i> Copy Code
                </button>
            </div>
            
            <div class="device-note">
                <i class="fas fa-mobile-alt"></i> Anyone with this code can take your quiz on any device
            </div>
            
            <div class="leaderboard">
                <div class="leaderboard-header">TOP PERFORMERS</div>
                <div id="leaderboard-content">
                    <!-- Leaderboard content will be dynamically added here -->
                </div>
            </div>
            
            <button class="btn btn-secondary" style="margin: 40px auto 0; display: block;" onclick="navigateTo('home-page')">
                <i class="fas fa-home"></i> BACK TO HOME
            </button>
        </div>
        
        <!-- Page 5: Join Quiz -->
        <div id="join-page" class="page">
            <h2>JOIN A QUIZ</h2>
            <p class="subtitle">Enter the quiz code to join from any device</p>
            
            <div class="form-group">
                <label for="quiz-code-input" class="required">Quiz Code</label>
                <input type="text" id="quiz-code-input" placeholder="Enter 6-digit code" required>
            </div>
            
            <div class="form-group">
                <label for="player-name" class="required">Your Name</label>
                <input type="text" id="player-name" placeholder="Enter your name" required>
            </div>
            
            <div class="error-message" id="join-error">Please fill in all required fields!</div>
            
            <button class="btn btn-primary" style="margin: 20px auto; display: block;" onclick="validateJoinForm()">
                <i class="fas fa-play"></i> START QUIZ
            </button>
            
            <button class="btn btn-secondary" style="margin: 0 auto; display: block;" onclick="navigateTo('home-page')">
                <i class="fas fa-arrow-left"></i> BACK TO HOME
            </button>
        </div>
        
        <!-- Page 6: Quiz Taking -->
        <div id="quiz-page" class="page">
            <h2>QUIZ CHALLENGE</h2>
            <div class="points-display">Each question is worth <span>1 point</span>. Get all right for a perfect score!</div>
            <div class="progress-bar">
                <div class="progress" id="quiz-progress" style="width: 0%"></div>
            </div>
            
            <div id="quiz-container">
                <!-- Quiz content will be dynamically added here -->
            </div>
        </div>
        
        <!-- Page 7: Results -->
        <div id="results-page" class="page">
            <div class="result-container">
                <h2>QUIZ RESULTS</h2>
                <div class="score-display" id="final-score">85%</div>
                <div class="points-display">Score: <span id="points-display">17</span> out of <span id="total-points">20</span> points</div>
                
                <div class="stars">
                    <i class="fas fa-star star filled"></i>
                    <i class="fas fa-star star filled"></i>
                    <i class="fas fa-star star filled"></i>
                    <i class="fas fa-star star filled"></i>
                    <i class="fas fa-star star"></i>
                </div>
                
                <p style="font-size: 1.3rem; margin: 20px 0;">You know <span id="player-name-display">Alex</span> pretty well!</p>
                
                <div class="leaderboard" style="margin-top: 30px;">
                    <div class="leaderboard-header">LEADERBOARD</div>
                    <div id="results-leaderboard">
                        <!-- Results leaderboard will be dynamically added here -->
                    </div>
                </div>
                
                <button class="btn btn-primary" style="margin: 30px auto 0; display: block;" onclick="navigateTo('home-page')">
                    <i class="fas fa-redo"></i> PLAY AGAIN
                </button>
            </div>
        </div>
    </div>

    <script>
        // Mock database for quizzes (simulates server storage)
        const mockDatabase = {
            quizzes: {},
            
            // Save a quiz to the database
            saveQuiz: function(quiz) {
                this.quizzes[quiz.id] = quiz;
                return quiz.id;
            },
            
            // Get a quiz by ID
            getQuiz: function(id) {
                return this.quizzes[id] || null;
            },
            
            // Save a score to a quiz
            saveScore: function(quizId, playerName, score, totalQuestions) {
                const quiz = this.getQuiz(quizId);
                if (!quiz) return false;
                
                // Add the score
                quiz.scores.push({
                    name: playerName,
                    score: score,
                    total: totalQuestions,
                    percentage: Math.round((score / totalQuestions) * 100),
                    date: new Date().toLocaleDateString()
                });
                
                // Sort scores highest to lowest
                quiz.scores.sort((a, b) => b.percentage - a.percentage);
                
                return true;
            }
        };
        
        // Page navigation
        function navigateTo(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }
        
        // Category selection
        function selectCategory(category) {
            // Validate inputs before proceeding
            const creatorName = document.getElementById('creator-name').value;
            const creatorEmail = document.getElementById('creator-email').value;
            
            if (!creatorName || !creatorEmail) {
                document.getElementById('create-error').style.display = 'block';
                return;
            }
            
            document.getElementById('create-error').style.display = 'none';
            currentCategory = category;
            navigateTo('questions-page');
            generateQuestions(category);
        }
        
        // Default questions for friends and partners
        const friendQuestions = [
            {question: "What's my favorite supercar?", options: ["Lamborghini", "Ferrari", "Bugatti", "McLaren"]},
            {question: "Where would I go for my dream vacation?", options: ["Bora Bora", "Swiss Alps", "Tokyo", "Santorini"]},
            {question: "What's my go-to comfort food?", options: ["Pizza", "Sushi", "Tacos", "Pasta"]},
            {question: "Which superhero would I want to be?", options: ["Iron Man", "Spider-Man", "Wonder Woman", "Black Panther"]},
            {question: "What's my biggest fear?", options: ["Heights", "Spiders", "Failure", "Public Speaking"]},
            {question: "What was my childhood dream job?", options: ["Astronaut", "Doctor", "Musician", "Athlete"]},
            {question: "What's my favorite season?", options: ["Spring", "Summer", "Autumn", "Winter"]},
            {question: "What type of music do I listen to most?", options: ["Pop", "Rock", "Hip Hop", "Electronic"]},
            {question: "What's my favorite movie genre?", options: ["Action", "Comedy", "Sci-Fi", "Drama"]},
            {question: "What's my favorite sport to watch?", options: ["Football", "Basketball", "Tennis", "Formula 1"]},
            {question: "What's my ideal weekend activity?", options: ["Hiking", "Netflix", "Partying", "Shopping"]},
            {question: "What's my most used app?", options: ["Instagram", "TikTok", "WhatsApp", "YouTube"]},
            {question: "What's my favorite dessert?", options: ["Ice Cream", "Chocolate Cake", "Cheesecake", "Fruit"]},
            {question: "What's my biggest pet peeve?", options: ["Loud Chewing", "Being Late", "Interruptions", "Messiness"]},
            {question: "What's my hidden talent?", options: ["Singing", "Drawing", "Cooking", "Dancing"]},
            {question: "What's my favorite book genre?", options: ["Fantasy", "Mystery", "Sci-Fi", "Biography"]},
            {question: "What would I do with a million dollars?", options: ["Travel", "Invest", "Buy House", "Charity"]},
            {question: "What's my favorite animal?", options: ["Dog", "Cat", "Dolphin", "Panda"]},
            {question: "What's my most prized possession?", options: ["Phone", "Laptop", "Jewelry", "Photo Album"]},
            {question: "What's my favorite type of weather?", options: ["Sunny", "Rainy", "Snowy", "Cloudy"]}
        ];
        
        const partnerQuestions = [
            {question: "Where did we have our first date?", options: ["Italian Restaurant", "Beach", "Coffee Shop", "Park"]},
            {question: "What's my love language?", options: ["Words of Affirmation", "Acts of Service", "Receiving Gifts", "Quality Time"]},
            {question: "What's my biggest turn-off?", options: ["Being Late", "Bad Table Manners", "Arrogance", "Laziness"]},
            {question: "What's my dream proposal location?", options: ["Paris", "Beach at Sunset", "Mountaintop", "Childhood Home"]},
            {question: "What's my favorite thing about you?", options: ["Your Smile", "Your Sense of Humor", "Your Kindness", "Your Intelligence"]},
            {question: "What annoys me the most?", options: ["Untidiness", "Forgetting Things", "Interrupting", "Being Impatient"]},
            {question: "What's my ideal date night?", options: ["Fine Dining", "Movie Night", "Adventure", "Stargazing"]},
            {question: "What makes me feel most loved?", options: ["Physical Touch", "Words of Affirmation", "Gifts", "Quality Time"]},
            {question: "What's my favorite memory with you?", options: ["Our First Trip", "Our First Kiss", "That Special Dinner", "Our Anniversary"]},
            {question: "What's my biggest relationship fear?", options: ["Betrayal", "Growing Apart", "Losing Independence", "Arguments"]},
            {question: "What's my relationship deal-breaker?", options: ["Dishonesty", "Disrespect", "Lack of Ambition", "Different Values"]},
            {question: "What's my favorite way to spend time with you?", options: ["Cooking Together", "Traveling", "Watching Movies", "Deep Conversations"]},
            {question: "What's my dream vacation with you?", options: ["Maldives", "Safari in Africa", "European Tour", "Japan"]},
            {question: "What's the first thing I noticed about you?", options: ["Your Eyes", "Your Smile", "Your Style", "Your Confidence"]},
            {question: "What's my favorite pet name for you?", options: ["Baby", "Sweetheart", "Love", "Special Nickname"]},
            {question: "What's my favorite thing you do for me?", options: ["Surprise Gifts", "Massages", "Cooking", "Love Notes"]},
            {question: "What makes me feel appreciated?", options: ["Thank You Notes", "Small Gifts", "Acts of Service", "Quality Time"]},
            {question: "What's my favorite feature of yours?", options: ["Eyes", "Smile", "Hair", "Personality"]},
            {question: "What's my relationship goal?", options: ["Grow Old Together", "Travel the World", "Build a Family", "Support Each Other"]},
            {question: "What do I value most in our relationship?", options: ["Trust", "Communication", "Passion", "Friendship"]}
        ];
        
        // Generate questions based on category
        let currentCategory = '';
        let currentQuestions = [];
        let selectedQuestions = [];
        let questionCount = 20;
        
        function generateQuestions(category) {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';
            
            // Get questions based on category
            currentQuestions = category === 'friend' ? [...friendQuestions] : [...partnerQuestions];
            
            // Show custom question form
            const customForm = document.createElement('div');
            customForm.className = 'custom-question-form';
            customForm.innerHTML = `
                <h4>Create Custom Questions</h4>
                <div class="form-group">
                    <label for="custom-question">Question</label>
                    <input type="text" id="custom-question" placeholder="Enter your custom question">
                </div>
                <div class="form-group">
                    <label>Options (separate with commas)</label>
                    <textarea id="custom-options" placeholder="Option 1, Option 2, Option 3, Option 4"></textarea>
                </div>
                <button class="btn btn-secondary" onclick="addCustomQuestion()">
                    <i class="fas fa-plus"></i> ADD CUSTOM QUESTION
                </button>
            `;
            container.appendChild(customForm);
            
            // Generate question cards
            for (let i = 0; i < questionCount; i++) {
                const q = currentQuestions[i];
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.innerHTML = `
                    <h3>${i + 1}. ${q.question}</h3>
                    <div class="options">
                        ${q.options.map(opt => `
                            <div class="option" onclick="selectOption(this, ${i})">
                                ${opt}
                            </div>
                        `).join('')}
                    </div>
                    <div class="form-group" style="margin-top: 15px;">
                        <label>Edit Question</label>
                        <input type="text" class="edit-question" data-index="${i}" value="${q.question}" placeholder="Edit question">
                    </div>
                    <div class="form-group">
                        <label>Edit Options (separate with commas)</label>
                        <textarea class="edit-options" data-index="${i}" placeholder="Edit options">${q.options.join(', ')}</textarea>
                    </div>
                `;
                container.appendChild(questionCard);
            }
            
            // Set up event listeners for editing
            document.querySelectorAll('.edit-question').forEach(input => {
                input.addEventListener('change', function() {
                    const index = parseInt(this.dataset.index);
                    currentQuestions[index].question = this.value;
                    updateQuestionCard(index);
                });
            });
            
            document.querySelectorAll('.edit-options').forEach(textarea => {
                textarea.addEventListener('change', function() {
                    const index = parseInt(this.dataset.index);
                    currentQuestions[index].options = this.value.split(',').map(opt => opt.trim());
                    updateQuestionCard(index);
                });
            });
            
            // Enable the create button
            document.getElementById('create-quiz-btn').onclick = createQuiz;
        }
        
        // Update a question card after editing
        function updateQuestionCard(index) {
            const q = currentQuestions[index];
            const card = document.querySelector(`.question-card:nth-child(${index + 2})`); // +2 because custom form is first
            card.querySelector('h3').textContent = `${index + 1}. ${q.question}`;
            
            const optionsContainer = card.querySelector('.options');
            optionsContainer.innerHTML = q.options.map(opt => `
                <div class="option" onclick="selectOption(this, ${index})">
                    ${opt}
                </div>
            `).join('');
        }
        
        // Add a custom question
        function addCustomQuestion() {
            const questionInput = document.getElementById('custom-question');
            const optionsInput = document.getElementById('custom-options');
            
            if (!questionInput.value || !optionsInput.value) {
                alert('Please enter both a question and options');
                return;
            }
            
            const newQuestion = {
                question: questionInput.value,
                options: optionsInput.value.split(',').map(opt => opt.trim())
            };
            
            currentQuestions.push(newQuestion);
            questionCount = currentQuestions.length;
            document.getElementById('question-count').value = questionCount;
            updateQuestionCount();
            
            // Clear inputs
            questionInput.value = '';
            optionsInput.value = '';
        }
        
        // Update question count
        function updateQuestionCount() {
            questionCount = parseInt(document.getElementById('question-count').value);
            document.getElementById('total-count').textContent = questionCount;
            
            // Regenerate questions with new count
            generateQuestions(currentCategory);
            
            // Reset selection progress
            selectedQuestions = new Array(questionCount).fill(false);
            document.getElementById('selected-count').textContent = '0';
            document.getElementById('selection-progress').style.width = '0%';
        }
        
        // Question selection
        function selectOption(element, questionIndex) {
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            
            selectedQuestions[questionIndex] = true;
            
            const selectedCount = selectedQuestions.filter(q => q).length;
            document.getElementById('selected-count').textContent = selectedCount;
            document.getElementById('selection-progress').style.width = `${(selectedCount / questionCount) * 100}%`;
            
            // Enable create button if all questions have an answer selected
            document.getElementById('create-quiz-btn').disabled = selectedCount < questionCount;
        }
        
        // Create quiz
        function createQuiz() {
            // Validate that all questions have answers selected
            const selectedCount = selectedQuestions.filter(q => q).length;
            if (selectedCount < questionCount) {
                alert(`Please select answers for all ${questionCount} questions!`);
                return;
            }
            
            // Create quiz object
            const quiz = {
                id: Math.random().toString(36).substring(2, 10).toUpperCase(),
                creator: document.getElementById('creator-name').value,
                category: currentCategory,
                questions: currentQuestions.slice(0, questionCount),
                scores: [] // To store player scores
            };
            
            // Save quiz to mock database (simulates server storage)
            mockDatabase.saveQuiz(quiz);
            
            // Set the quiz code display
            document.getElementById('quiz-code').textContent = quiz.id;
            
            // Navigate to code page
            navigateTo('code-page');
            
            // Update leaderboard
            updateLeaderboard(quiz.id);
        }
        
        // Update leaderboard
        function updateLeaderboard(quizId) {
            const quiz = mockDatabase.getQuiz(quizId);
            const container = document.getElementById('leaderboard-content');
            container.innerHTML = '';
            
            if (!quiz || quiz.scores.length === 0) {
                container.innerHTML = '<div class="leaderboard-item"><span>No scores yet. Be the first to play!</span></div>';
                return;
            }
            
            // Sort scores by highest
            const sortedScores = [...quiz.scores].sort((a, b) => b.percentage - a.percentage);
            
            // Show top 5 scores
            sortedScores.slice(0, 5).forEach((score, index) => {
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                item.innerHTML = `
                    <span class="leaderboard-position">${index + 1}</span>
                    <span class="leaderboard-name">${score.name}</span>
                    <span class="leaderboard-score">${score.percentage}%</span>
                `;
                container.appendChild(item);
            });
        }
        
        // Copy quiz code
        function copyCode() {
            const code = document.getElementById('quiz-code').textContent;
            navigator.clipboard.writeText(code);
            alert('Quiz code copied to clipboard!');
        }
        
        // Share via social media
        function shareVia(platform) {
            const code = document.getElementById('quiz-code').textContent;
            let url = '';
            
            switch(platform) {
                case 'facebook':
                    url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}?quiz=${code}`;
                    break;
                case 'twitter':
                    url = `https://twitter.com/intent/tweet?text=Take%20my%20quiz!%20Use%20code%20${code}%20at%20${encodeURIComponent(window.location.href)}`;
                    break;
                case 'whatsapp':
                    url = `https://api.whatsapp.com/send?text=Take%20my%20quiz!%20Use%20code%20${code}%20at%20${encodeURIComponent(window.location.href)}`;
                    break;
            }
            
            if (url) {
                window.open(url, '_blank', 'width=600,height=400');
            }
        }
        
        // Validate join form
        function validateJoinForm() {
            const code = document.getElementById('quiz-code-input').value;
            const name = document.getElementById('player-name').value;
            const errorDiv = document.getElementById('join-error');
            
            if (!code || !name) {
                errorDiv.textContent = 'Please fill in all required fields!';
                errorDiv.style.display = 'block';
                return;
            }
            
            // Get quiz from mock database
            const quiz = mockDatabase.getQuiz(code);
            
            if (!quiz) {
                errorDiv.textContent = 'Invalid quiz code! Please check and try again.';
                errorDiv.style.display = 'block';
                return;
            }
            
            errorDiv.style.display = 'none';
            startQuiz(code, name);
        }
        
        // Start quiz
        function startQuiz(code, name) {
            // Get quiz from mock database
            currentQuiz = mockDatabase.getQuiz(code);
            currentPlayer = name;
            
            if (!currentQuiz) {
                alert('Quiz not found. It may have expired or the code was entered incorrectly.');
                return;
            }
            
            // Navigate to quiz page
            navigateTo('quiz-page');
            startQuizSession();
        }
        
        // Start quiz session
        let currentQuiz = null;
        let currentPlayer = '';
        let currentQuestionIndex = 0;
        let playerScore = 0;
        let totalQuestions = 0;
        
        function startQuizSession() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';
            
            totalQuestions = currentQuiz.questions.length;
            
            // Show first question
            displayQuestion();
        }
        
        // Display current question
        function displayQuestion() {
            if (currentQuestionIndex >= totalQuestions) {
                finishQuiz();
                return;
            }
            
            const question = currentQuiz.questions[currentQuestionIndex];
            const container = document.getElementById('quiz-container');
            
            container.innerHTML = `
                <h3 style="margin-bottom: 30px; text-align: center;">Question ${currentQuestionIndex + 1} of ${totalQuestions}</h3>
                <div class="question-card">
                    <h3>${question.question}</h3>
                    <div class="options">
                        ${question.options.map((opt, i) => `
                            <div class="option" onclick="answerQuestion(${i})">
                                ${opt}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Update progress
            document.getElementById('quiz-progress').style.width = `${((currentQuestionIndex) / totalQuestions) * 100}%`;
        }
        
        // Answer question
        function answerQuestion(optionIndex) {
            // For demo, we'll consider the first option as correct
            if (optionIndex === 0) {
                playerScore++;
            }
            
            currentQuestionIndex++;
            displayQuestion();
        }
        
        // Finish quiz
        function finishQuiz() {
            // Calculate percentage
            const percentage = Math.round((playerScore / totalQuestions) * 100);
            
            // Save score to quiz in mock database
            mockDatabase.saveScore(currentQuiz.id, currentPlayer, playerScore, totalQuestions);
            
            // Show results
            showResults(percentage, playerScore, totalQuestions);
        }
        
        // Show results
        function showResults(percentage, points, totalPoints) {
            // Update UI
            document.getElementById('final-score').textContent = `${percentage}%`;
            document.getElementById('points-display').textContent = points;
            document.getElementById('total-points').textContent = totalPoints;
            document.getElementById('player-name-display').textContent = currentPlayer;
            
            // Update stars based on score
            const stars = document.querySelectorAll('#results-page .star');
            stars.forEach((star, index) => {
                if (index < Math.floor(percentage / 20)) {
                    star.classList.add('filled');
                } else {
                    star.classList.remove('filled');
                }
            });
            
            // Update leaderboard
            const leaderboardContainer = document.getElementById('results-leaderboard');
            leaderboardContainer.innerHTML = '';
            
            // Get updated quiz data
            const quiz = mockDatabase.getQuiz(currentQuiz.id);
            
            // Sort scores by highest
            const sortedScores = [...quiz.scores].sort((a, b) => b.percentage - a.percentage);
            
            sortedScores.forEach((score, index) => {
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                item.innerHTML = `
                    <span class="leaderboard-position">${index + 1}</span>
                    <span class="leaderboard-name">${score.name}</span>
                    <span class="leaderboard-score">${score.percentage}%</span>
                `;
                leaderboardContainer.appendChild(item);
            });
            
            navigateTo('results-page');
        }
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set up create quiz button
            document.getElementById('create-quiz-btn').disabled = true;
            
            // Add required validation
            document.querySelectorAll('input[required]').forEach(input => {
                input.addEventListener('input', function() {
                    if (this.value) {
                        this.style.borderColor = 'rgba(108, 92, 231, 0.3)';
                    }
                });
            });
            
            // Check for quiz code in URL
            const urlParams = new URLSearchParams(window.location.search);
            const quizCode = urlParams.get('quiz');
            if (quizCode) {
                document.getElementById('quiz-code-input').value = quizCode;
                navigateTo('join-page');
            }
        });
    </script>
</body>
</html>